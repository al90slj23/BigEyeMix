# 麻瓜拼接 AI 测试指南

## 快速测试（Web 界面）

### 准备工作

1. 访问 https://bem.it.sc.cn/muggle
2. 上传两个测试音频：
   - 第一段：较长的音频（如 3 分钟以上）
   - 第二段：较短的音频（如 1-2 分钟）

### 测试用例

#### 🔴 关键测试：分段插入

**输入：**
```
把第一段音频分成1分钟、1分钟、1分钟这样的间隔，然后在每个中间都加入第二段音频
```

**期望结果：**
```
片段定义：
- A1a片段：《xxx》00:00.00 - 01:00.00
- B1片段：《xxx》00:00.00 - xx:xx.xx（完整）
- A1b片段：《xxx》01:00.00 - 02:00.00
- B1片段：《xxx》00:00.00 - xx:xx.xx（完整）
- A1c片段：《xxx》02:00.00 - 03:00.00

拼接顺序：
A1a + (3.0秒 淡化过渡) + B1 + (3.0秒 淡化过渡) + A1b + (3.0秒 淡化过渡) + B1 + (3.0秒 淡化过渡) + A1c
```

**验证要点：**
- ✅ 生成 5 个片段（不是 2 个）
- ✅ A 和 B 交替出现（A-B-A-B-A）
- ✅ 每个 A 片段约 60 秒
- ✅ B 片段是完整的

---

#### 🟡 测试2：分段插入静音

**输入：**
```
把第一段音频每隔30秒加入2秒静音
```

**期望结果：**
```
片段定义：
- A1a片段：《xxx》00:00.00 - 00:30.00
- A1b片段：《xxx》00:30.00 - 01:00.00
- A1c片段：《xxx》01:00.00 - 01:30.00
- A1d片段：《xxx》01:30.00 - 02:00.00

拼接顺序：
A1a + (2.0秒 静音填充) + A1b + (2.0秒 静音填充) + A1c + (2.0秒 静音填充) + A1d
```

**验证要点：**
- ✅ 生成多个 30 秒片段
- ✅ 每个片段之间有 2 秒静音
- ✅ 只使用第一段音频

---

#### 🟢 测试3：去掉中间某段

**输入：**
```
第一段音频1分56到2分34这一段不要，剩下的部分加上第二段完整音频
```

**期望结果：**
```
片段定义：
- A1片段：《xxx》00:00.00 - 01:56.00
- A2片段：《xxx》02:34.00 - xx:xx.xx（结尾）
- B1片段：《xxx》00:00.00 - xx:xx.xx（完整）

拼接顺序：
A1 + (3.0秒 淡化过渡) + A2 + (3.0秒 淡化过渡) + B1
```

**验证要点：**
- ✅ 生成 3 个片段
- ✅ A 被分成两段（前段和后段）
- ✅ 中间部分被去掉
- ✅ B 是完整的

---

#### 🔵 测试4：完整拼接

**输入：**
```
第一段全部加第二段全部
```

**期望结果：**
```
片段定义：
- A1片段：《xxx》00:00.00 - xx:xx.xx（完整）
- B1片段：《xxx》00:00.00 - xx:xx.xx（完整）

拼接顺序：
A1 + (3.0秒 淡化过渡) + B1
```

**验证要点：**
- ✅ 生成 2 个片段
- ✅ 都是完整音频
- ✅ 中间有过渡

---

## 验证步骤

### 1. 检查 AI 理解

点击"生成拼接方案"后，查看 AI 返回的说明：

```
✅ 正确：片段定义清晰，拼接顺序合理
❌ 错误：只有 A1 + B1，没有分段
```

### 2. 应用方案

点击"应用方案"，检查时间轴：

```
✅ 正确：时间轴显示多个片段块
❌ 错误：只显示 2 个片段块
```

### 3. 查看预览

检查预览波形：

```
✅ 正确：波形显示多个不同颜色的片段
❌ 错误：波形只有两种颜色
```

### 4. 播放测试

点击播放按钮，听音频效果：

```
✅ 正确：能听到 A 和 B 交替播放
❌ 错误：只听到 A 完整播放后 B 完整播放
```

---

## 常见问题

### Q1: AI 理解错误怎么办？

**A:** 点击"重新生成"按钮，或者尝试更清晰的描述：
- ❌ "把第一段分成几段加第二段"（模糊）
- ✅ "把第一段音频分成1分钟、1分钟、1分钟，每个中间插入第二段完整音频"（清晰）

### Q2: 生成的片段时长不对？

**A:** 检查音频实际时长，AI 会根据实际时长自动调整。如果第一段只有 2 分钟，无法分成 3 个 1 分钟片段。

### Q3: 如何测试更复杂的场景？

**A:** 可以组合使用：
```
第一段前1分钟 + 第二段完整 + 第一段后1分钟 + 第二段完整
```

---

## 服务器端测试（高级）

如果需要批量测试或调试：

```bash
# SSH 登录
ssh root@bem.it.sc.cn

# 进入项目
cd /www/wwwroot/bem.it.sc.cn/api

# 激活环境
source venv/bin/activate

# 运行测试
python3 test_ai_manual.py

# 查看结果
cat test_ai_report.json | python3 -m json.tool
```

---

## 报告问题

如果发现 AI 理解错误，请记录：

1. **用户输入**：完整的描述文字
2. **AI 输出**：生成的片段定义和拼接顺序
3. **期望结果**：应该生成什么
4. **实际结果**：实际生成了什么
5. **音频信息**：两段音频的时长

发送到项目 Issue 或联系开发团队。

---

**最后更新**: 2026-01-16  
**测试版本**: v43  
**部署状态**: ✅ 已部署
